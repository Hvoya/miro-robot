{"version":3,"sources":["webpack:///./src/views/NewProject.vue?401e","webpack:///src/views/NewProject.vue","webpack:///./src/views/NewProject.vue?c6e0","webpack:///./src/views/NewProject.vue?2473","webpack:///./src/views/NewProject.vue?71c2","webpack:///./node_modules/core-js/modules/es6.function.name.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","domProps","innerHTML","_s","$t","isEditView","staticClass","attrs","gutter","span","_v","before-upload","beforeUpload","fileList","imageList","action","listType","remove","handleImageRemove","on","preview","handlePreview","change","handleChange","type","handleFileRemove","handleFilesChange","form","submit","handleSubmit","length","label","wrapperCol","labelCol","_e","directives","name","rawName","value","rules","required","message","expression","model","callback","$$v","description","justify","html-type","visible","previewVisible","footer","cancel","handleCancel","staticStyle","width","alt","src","previewImage","noImageModalVisible","ok","createProject","staticRenderFns","NewProjectvue_type_script_lang_js_","components","ProjectPageTemplate","quillEditor","vue_quill_editor","data","$form","createForm","methods","file","url","thumbUrl","_ref","size","_ref2","e","preventDefault","editProject","_this","validateFields","err","values","images","map","item","response","id","uid","files","fetch","put","$route","params","heading","main_image_id","main_image_number","then","r","$message","success","$router","push","catch","error","_this2","post","image","image_id","del","file_id","isLt2M","mounted","_this3","path","includes","get","concat","$store","state","user","setFieldsValue","project","status","original_name","views_NewProjectvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NewProject_vue_vue_type_style_index_0_id_c1de9c22_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NewProject_vue_vue_type_style_index_0_id_c1de9c22_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","dP","f","FProto","Function","prototype","nameRE","NAME","configurable","match"],"mappings":"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","file":"js/chunk-32cfbf76.95f68fc3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ProjectPageTemplate',[_c('h2',{domProps:{\"innerHTML\":_vm._s(_vm.$t(_vm.isEditView ? 'headings.edit_project' : 'headings.new_project'))}}),_c('a-card',[_c('div',{staticClass:\"files-container\"},[_c('a-row',{attrs:{\"gutter\":20}},[_c('a-col',{attrs:{\"span\":13}},[_c('div',{staticClass:\"images\"},[_c('h4',[_vm._v(_vm._s(_vm.$t(\"headings.upload_images\")))]),_c('a-upload',{attrs:{\"before-upload\":_vm.beforeUpload,\"fileList\":_vm.imageList,\"action\":\"/api/images\",\"listType\":\"picture-card\",\"remove\":_vm.handleImageRemove},on:{\"preview\":_vm.handlePreview,\"change\":_vm.handleChange}},[_c('div',[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_c('div',{staticClass:\"ant-upload-text\"},[_vm._v(_vm._s(_vm.$t('buttons.upload')))])],1)])],1)]),_c('a-col',{attrs:{\"span\":10}},[_c('div',{staticClass:\"documents\"},[_c('h4',[_vm._v(_vm._s(_vm.$t(\"headings.attach_files\")))]),_c('a-upload',{attrs:{\"beforeUpload\":_vm.beforeUpload,\"remove\":_vm.handleFileRemove,\"fileList\":_vm.fileList,\"action\":\"/api/files\"},on:{\"change\":_vm.handleFilesChange}},[_c('a-button',[_c('a-icon',{attrs:{\"type\":\"upload\"}}),_vm._v(\"\\n                \"+_vm._s(_vm.$t('buttons.attach'))+\"\\n              \")],1)],1)],1)])],1)],1),_c('div',{staticClass:\"text-container\"},[_c('a-form',{attrs:{\"form\":_vm.form},on:{\"submit\":_vm.handleSubmit}},[(_vm.imageList.length > 0)?_c('a-form-item',{attrs:{\"label\":_vm.$t('form_labels.main_image_id'),\"wrapperCol\":{span: 12},\"labelCol\":{span: 24}}}):_vm._e(),_c('a-form-item',{attrs:{\"label\":_vm.$t('form_labels.project_name'),\"wrapperCol\":{span: 12},\"labelCol\":{span: 24}}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n              'heading',\n              {rules: [{ required: true, message: _vm.$t('form_errors.required') }]}\n              ]),expression:\"[\\n              'heading',\\n              {rules: [{ required: true, message: $t('form_errors.required') }]}\\n              ]\"}]})],1),_c('a-form-item',{attrs:{\"label\":_vm.$t('form_labels.project_description')}},[_c('quill-editor',{model:{value:(_vm.description),callback:function ($$v) {_vm.description=$$v},expression:\"description\"}})],1),_c('a-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('a-button',{attrs:{\"type\":\"primary\",\"html-type\":\"submit\"}},[_vm._v(\"\\n              \"+_vm._s(_vm.isEditView ? _vm.$t('buttons.edit_project') : _vm.$t('buttons.create_project'))+\"\\n          \")])],1)],1)],1)]),_c('a-modal',{attrs:{\"visible\":_vm.previewVisible,\"footer\":null},on:{\"cancel\":_vm.handleCancel}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"alt\":\"example\",\"src\":_vm.previewImage}})]),_c('a-modal',{attrs:{\"visible\":_vm.noImageModalVisible},on:{\"ok\":_vm.createProject,\"cancel\":_vm.handleCancel}},[_vm._v(_vm._s(_vm.$t(\"modals.creation_project_with_no_images\")))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ProjectPageTemplate>\n    <h2 v-html=\"$t(isEditView ? 'headings.edit_project' : 'headings.new_project')\"></h2>\n    <a-card>\n      <div class=\"files-container\">\n        <a-row :gutter=\"20\">\n          <a-col :span=\"13\">\n            <div class=\"images\">\n              <h4>{{$t(\"headings.upload_images\")}}</h4>\n              <a-upload\n                      :before-upload=\"beforeUpload\"\n                :fileList=\"imageList\"\n                @preview=\"handlePreview\"\n                @change=\"handleChange\"\n                action=\"/api/images\"\n                listType=\"picture-card\"\n                :remove=\"handleImageRemove\"\n              >\n                <div>\n                  <a-icon type=\"plus\" />\n                  <div class=\"ant-upload-text\">{{$t('buttons.upload')}}</div>\n                </div>\n              </a-upload>\n            </div>\n          </a-col>\n          <a-col :span=\"10\">\n            <div class=\"documents\">\n              <h4>{{$t(\"headings.attach_files\")}}</h4>\n              <a-upload\n                      :beforeUpload=\"beforeUpload\"\n                      :remove=\"handleFileRemove\" :fileList=\"fileList\" @change=\"handleFilesChange\" action=\"/api/files\">\n                <a-button>\n                  <a-icon type=\"upload\" />\n                  {{$t('buttons.attach')}}\n                </a-button>\n              </a-upload>\n            </div>\n          </a-col>\n        </a-row>\n      </div>\n      <div class=\"text-container\">\n        <a-form :form=\"form\" @submit=\"handleSubmit\">\n          <a-form-item\n            v-if=\"imageList.length > 0\"\n            :label=\"$t('form_labels.main_image_id')\"\n            :wrapperCol=\"{span: 12}\"\n            :labelCol=\"{span: 24}\"\n          >\n          </a-form-item>\n          <a-form-item\n            :label=\"$t('form_labels.project_name')\"\n            :wrapperCol=\"{span: 12}\"\n            :labelCol=\"{span: 24}\"\n          >\n            <a-input\n              v-decorator=\"[\n                'heading',\n                {rules: [{ required: true, message: $t('form_errors.required') }]}\n                ]\"\n            />\n          </a-form-item>\n          <a-form-item :label=\"$t('form_labels.project_description')\">\n            <quill-editor v-model=\"description\"></quill-editor>\n          </a-form-item>\n          <a-row type=\"flex\" justify=\"center\">\n            <a-button type=\"primary\" html-type=\"submit\">\n                {{isEditView ? $t('buttons.edit_project') : $t('buttons.create_project')}}\n            </a-button>\n          </a-row>\n        </a-form>\n      </div>\n    </a-card>\n    <a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancel\">\n      <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\n    </a-modal>\n    <a-modal\n      @ok=\"createProject\"\n      :visible=\"noImageModalVisible\"\n      @cancel=\"handleCancel\"\n    >{{$t(\"modals.creation_project_with_no_images\")}}</a-modal>\n  </ProjectPageTemplate>\n</template>\n\n<script>\nimport { quillEditor } from \"vue-quill-editor\";\n\nimport xhr from \"../utils/fetch\";\nimport ProjectPageTemplate from \"../templates/ProjectPageTemplate\";\n\nimport \"quill/dist/quill.core.css\";\nimport \"quill/dist/quill.snow.css\";\nimport \"quill/dist/quill.bubble.css\";\n\nexport default {\n  components: {\n    ProjectPageTemplate,\n    quillEditor\n  },\n  data() {\n    return {\n      previewVisible: false,\n      noImageModalVisible: false,\n      isEditView: false,\n      previewImage: \"\",\n      imageList: [],\n      fileList: [],\n      form: this.$form.createForm(this),\n      description: \"\"\n    };\n  },\n  methods: {\n    handleCancel() {\n      this.previewVisible = false;\n    },\n    handlePreview(file) {\n      this.previewImage = file.url || file.thumbUrl;\n      this.previewVisible = true;\n    },\n    handleChange({ fileList, file }) {\n      if(file.size / 1024 / 1024 > 2) return;\n      this.imageList = fileList;\n    },\n    handleFilesChange({file, fileList}) {\n      if(file.size / 1024 / 1024 > 2) return;\n      this.fileList = fileList;\n    },\n    handleSubmit(e) {\n      e.preventDefault();\n      if(this.isEditView){\n        this.editProject();\n        return;\n      }\n      if (this.imageList.length === 0) {\n        this.noImageModalVisible = true;\n        return;\n      }\n      this.createProject();\n    },\n    editProject() {\n      this.noImageModalVisible = false;\n      this.form.validateFields((err, values) => {\n        if (err) return;\n        const images = this.imageList.map(item => item.response ? item.response.data.id : item.uid);\n        const files = this.fileList.map(item => item.response ? item.response.data.id : item.uid);\n\n        xhr\n        .put(\"/projects/\" + this.$route.params.id, {\n          name: values.heading,\n          description: this.description,\n          images,\n          files,\n          main_image_id:\n            images.length > 0 ? images[values.main_image_number - 1] : null\n        })\n        .then(r => {\n          this.$message.success(this.$t(\"success.project_saved\"));\n          this.$router.push(\"/projects/\" + this.$route.params.id);\n        })\n        .catch(() => {\n          this.$message.error(this.$t(\"errors.server_error\"));\n        });\n      });\n    },\n    createProject() {\n      this.noImageModalVisible = false;\n      this.form.validateFields((err, values) => {\n        if (err) return;\n        const images = this.imageList.map(item => item.response.data.id);\n        const files = this.fileList.map(item => item.response.data.id);\n\n        xhr\n          .post(\"/projects\", {\n            name: values.heading,\n            description: this.description,\n            images,\n            files,\n            main_image_id:\n              images.length > 0 ? images[values.main_image_number - 1] : null\n          })\n          .then(r => {\n            this.$message.success(this.$t(\"success.project_created\"));\n            this.$router.push(\"/projects\");\n          })\n          .catch(() => {\n            this.$message.error(this.$t(\"errors.server_error\"));\n          });\n      });\n    },\n    handleImageRemove(image){\n      const image_id = image.response ? image.response.data.id : image.uid;\n      xhr.del('/images/' + image_id)\n    },\n    handleFileRemove(file){\n      const file_id = file.response ? file.response.data.id : file.uid;\n      xhr.del('/files/' + file_id)\n    },\n    beforeUpload (file) {\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isLt2M) {\n        this.$message.error(this.$t('errors.max_file_size'))\n      }\n      return isLt2M\n    },\n  },\n  mounted() {\n    if(this.$route.path.includes('edit')){\n      this.isEditView = true;\n      xhr\n      .get(\n        `/projects/${this.$route.params.id}${\n          this.$store.state.user ? `?user_id=${this.$store.state.user.id}` : \"\"\n        }`\n      )\n      .then(response => {\n        this.form.setFieldsValue({heading: response.data.name});\n        this.description = response.data.description;\n        this.project = response.data;\n        this.imageList = response.data.images.map((image)=> ({\n          uid: image.id,\n          status: 'done',\n            url: '/api/images/' + image.name\n        }));\n        this.fileList = response.data.files.map((file)=> ({\n          uid: file.id,\n          name: file.original_name,\n          status: 'done',\n          url: '/api/files/' + file.id\n        }))\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\nh2 {\n  font-size: 30px;\n  margin-bottom: 30px;\n}\nh4 {\n  margin-bottom: 20px;\n}\n.files-container {\n  min-height: 400px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewProject.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewProject.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewProject.vue?vue&type=template&id=c1de9c22&scoped=true&\"\nimport script from \"./NewProject.vue?vue&type=script&lang=js&\"\nexport * from \"./NewProject.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewProject.vue?vue&type=style&index=0&id=c1de9c22&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c1de9c22\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewProject.vue?vue&type=style&index=0&id=c1de9c22&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewProject.vue?vue&type=style&index=0&id=c1de9c22&scoped=true&lang=css&\"","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n"],"sourceRoot":""}